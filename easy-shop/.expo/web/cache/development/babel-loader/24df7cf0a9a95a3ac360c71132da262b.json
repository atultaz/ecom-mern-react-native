{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useContext, useState, useCallback } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Container } from 'native-base';\nimport { useFocusEffect } from '@react-navigation/native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport OrderCard from \"../../Shared/OrderCard\";\nimport axios from 'axios';\nimport baseURL from \"../../assets/common/baseUrl\";\nimport AuthGlobal from \"../../Context/store/AuthGlobal\";\nimport { logoutUser } from \"../../Context/actions/Auth.actions\";\nimport { useEffect } from 'react/cjs/react.development';\n\nvar UserProfile = function UserProfile(props) {\n  var context = useContext(AuthGlobal);\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      userProfile = _useState2[0],\n      setUserProfile = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      orders = _useState4[0],\n      setOrders = _useState4[1];\n\n  useFocusEffect(useCallback(function () {\n    if (context.stateUser.isAuthenticated === false || context.stateUser.isAuthenticated === null) {\n      props.navigation.navigate('Login');\n    }\n\n    AsyncStorage.getItem('jwt').then(function (res) {\n      axios.get(baseURL + \"users/\" + context.stateUser.user.sub, {\n        headers: {\n          Authorization: \"Bearer \" + res\n        }\n      }).then(function (user) {\n        return setUserProfile(user.data);\n      });\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    axios.get(baseURL + \"orders\").then(function (x) {\n      var data = x.data;\n      console.log(data);\n      var userOrders = data.filter(function (order) {\n        return order.user.id === context.stateUser.user.sub;\n      });\n      setOrders(userOrders);\n    }).catch(function (error) {\n      return console.log('error');\n    });\n    return function () {\n      setUserProfile();\n      setOrders();\n    };\n  }, [context.stateUser.isAuthenticated]));\n  return React.createElement(Container, {\n    style: styles.container\n  }, React.createElement(ScrollView, {\n    contentContainerStyle: styles.subContainer\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 30\n    }\n  }, userProfile ? userProfile.name : ''), React.createElement(View, {\n    style: {\n      marginTop: 20\n    }\n  }, React.createElement(Text, {\n    style: {\n      margin: 10\n    }\n  }, \"Email: \", userProfile ? userProfile.email : ''), React.createElement(Text, {\n    style: {\n      margin: 10\n    }\n  }, \"Phone: \", userProfile ? userProfile.phone : '')), React.createElement(View, {\n    style: {\n      marginTop: 80\n    }\n  }, React.createElement(Button, {\n    title: 'Sign Out',\n    onPress: function onPress() {\n      return [AsyncStorage.removeItem('jwt'), logoutUser(context.dispatch)];\n    }\n  })), React.createElement(View, {\n    style: styles.order\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 20\n    }\n  }, \"My Orders\"), React.createElement(View, null, orders ? orders.map(function (x) {\n    return React.createElement(OrderCard, _extends({\n      key: x.id\n    }, x));\n  }) : React.createElement(View, {\n    style: styles.order\n  }, React.createElement(Text, null, \"You have no orders\"))))));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center'\n  },\n  subContainer: {\n    alignItems: 'center',\n    marginTop: 60\n  },\n  order: {\n    marginTop: 20,\n    alignItems: 'center',\n    marginBottom: 60\n  }\n});\nexport default UserProfile;","map":{"version":3,"sources":["/Users/atultiwari/Desktop/mern-ecom-app/easy-shop/Screens/User/UserProfile.js"],"names":["React","useContext","useState","useCallback","Container","useFocusEffect","AsyncStorage","OrderCard","axios","baseURL","AuthGlobal","logoutUser","useEffect","UserProfile","props","context","userProfile","setUserProfile","orders","setOrders","stateUser","isAuthenticated","navigation","navigate","getItem","then","res","get","user","sub","headers","Authorization","data","catch","error","console","log","x","userOrders","filter","order","id","styles","container","subContainer","fontSize","name","marginTop","margin","email","phone","removeItem","dispatch","map","StyleSheet","create","flex","alignItems","marginBottom"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useCallback } from 'react';\nimport { View, Text, ScrollView, Button, StyleSheet } from 'react-native';\nimport { Container } from 'native-base';\nimport { useFocusEffect } from '@react-navigation/native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport OrderCard from '../../Shared/OrderCard';\n\nimport axios from 'axios';\nimport baseURL from '../../assets/common/baseUrl';\n\nimport AuthGlobal from '../../Context/store/AuthGlobal';\nimport { logoutUser } from '../../Context/actions/Auth.actions';\nimport { useEffect } from 'react/cjs/react.development';\n\nconst UserProfile = (props) => {\n  const context = useContext(AuthGlobal);\n  const [userProfile, setUserProfile] = useState(null);\n  const [orders, setOrders] = useState();\n\n  useFocusEffect(\n    useCallback(() => {\n      if (\n        context.stateUser.isAuthenticated === false ||\n        context.stateUser.isAuthenticated === null\n      ) {\n        props.navigation.navigate('Login');\n      }\n\n      AsyncStorage.getItem('jwt')\n        .then((res) => {\n          axios\n            .get(`${baseURL}users/${context.stateUser.user.sub}`, {\n              headers: { Authorization: `Bearer ${res}` },\n            })\n            .then((user) => setUserProfile(user.data));\n        })\n        .catch((error) => console.log(error));\n\n      axios\n        .get(`${baseURL}orders`)\n        .then((x) => {\n          const data = x.data;\n          console.log(data);\n          const userOrders = data.filter(\n            (order) => order.user.id === context.stateUser.user.sub\n          );\n          setOrders(userOrders);\n        })\n        .catch((error) => console.log('error'));\n\n      return () => {\n        setUserProfile();\n        setOrders();\n      };\n    }, [context.stateUser.isAuthenticated])\n  );\n\n  return (\n    <Container style={styles.container}>\n      <ScrollView contentContainerStyle={styles.subContainer}>\n        <Text style={{ fontSize: 30 }}>\n          {userProfile ? userProfile.name : ''}\n        </Text>\n        <View style={{ marginTop: 20 }}>\n          <Text style={{ margin: 10 }}>\n            Email: {userProfile ? userProfile.email : ''}\n          </Text>\n          <Text style={{ margin: 10 }}>\n            Phone: {userProfile ? userProfile.phone : ''}\n          </Text>\n        </View>\n        <View style={{ marginTop: 80 }}>\n          <Button\n            title={'Sign Out'}\n            onPress={() => [\n              AsyncStorage.removeItem('jwt'),\n              logoutUser(context.dispatch),\n            ]}\n          />\n        </View>\n        <View style={styles.order}>\n          <Text style={{ fontSize: 20 }}>My Orders</Text>\n          <View>\n            {orders ? (\n              orders.map((x) => {\n                return <OrderCard key={x.id} {...x} />;\n              })\n            ) : (\n              <View style={styles.order}>\n                <Text>You have no orders</Text>\n              </View>\n            )}\n          </View>\n        </View>\n      </ScrollView>\n    </Container>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  subContainer: {\n    alignItems: 'center',\n    marginTop: 60,\n  },\n  order: {\n    marginTop: 20,\n    alignItems: 'center',\n    marginBottom: 60,\n  },\n});\n\nexport default UserProfile;\n"]},"metadata":{},"sourceType":"module"}