{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { Item, Picker } from 'native-base';\nimport FormContainer from \"../../Shared/Form/FormContainer\";\nimport Input from \"../../Shared/Form/Input\";\nimport EasyButton from \"../../Shared/StyledComponents/EasyButton\";\nimport Error from \"../../Shared/Error\";\nimport Icon from \"@expo/vector-icons/FontAwesome\";\nimport Toast from 'react-native-toast-message';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport baseURL from \"../../assets/common/baseUrl\";\nimport axios from 'axios';\nimport * as ImagePicker from 'expo-image-picker';\nimport mime from 'mime';\n\nvar ProductForm = function ProductForm(props) {\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      pickerValue = _useState2[0],\n      setPickerValue = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      brand = _useState4[0],\n      setBrand = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      name = _useState6[0],\n      setName = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      price = _useState8[0],\n      setPrice = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      description = _useState10[0],\n      setDescription = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      image = _useState12[0],\n      setImage = _useState12[1];\n\n  var _useState13 = useState(),\n      _useState14 = _slicedToArray(_useState13, 2),\n      mainImage = _useState14[0],\n      setMainImage = _useState14[1];\n\n  var _useState15 = useState(),\n      _useState16 = _slicedToArray(_useState15, 2),\n      category = _useState16[0],\n      setCategory = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      categories = _useState18[0],\n      setCategories = _useState18[1];\n\n  var _useState19 = useState(),\n      _useState20 = _slicedToArray(_useState19, 2),\n      token = _useState20[0],\n      setToken = _useState20[1];\n\n  var _useState21 = useState(),\n      _useState22 = _slicedToArray(_useState21, 2),\n      err = _useState22[0],\n      setError = _useState22[1];\n\n  var _useState23 = useState(),\n      _useState24 = _slicedToArray(_useState23, 2),\n      countInStock = _useState24[0],\n      setCountInStock = _useState24[1];\n\n  var _useState25 = useState(0),\n      _useState26 = _slicedToArray(_useState25, 2),\n      rating = _useState26[0],\n      setRating = _useState26[1];\n\n  var _useState27 = useState(false),\n      _useState28 = _slicedToArray(_useState27, 2),\n      isFeatured = _useState28[0],\n      setIsFeature = _useState28[1];\n\n  var _useState29 = useState(),\n      _useState30 = _slicedToArray(_useState29, 2),\n      richDescription = _useState30[0],\n      setRichDescription = _useState30[1];\n\n  var _useState31 = useState(0),\n      _useState32 = _slicedToArray(_useState31, 2),\n      numReviews = _useState32[0],\n      setNumReviews = _useState32[1];\n\n  var _useState33 = useState(null),\n      _useState34 = _slicedToArray(_useState33, 2),\n      item = _useState34[0],\n      setItem = _useState34[1];\n\n  useEffect(function () {\n    if (!props.route.params) {\n      setItem(null);\n    } else {\n      setItem(props.route.params.item);\n      setBrand(props.route.params.item.brand);\n      setName(props.route.params.item.name);\n      setPrice(props.route.params.item.price.toString());\n      setDescription(props.route.params.item.description);\n      setMainImage(props.route.params.item.image);\n      setImage(props.route.params.item.image);\n      setCategory(props.route.params.item.category._id);\n      setCountInStock(props.route.params.item.countInStock.toString());\n    }\n\n    AsyncStorage.getItem('jwt').then(function (res) {\n      setToken(res);\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    axios.get(baseURL + \"categories\").then(function (res) {\n      return setCategories(res.data);\n    }).catch(function (error) {\n      return alert('Error to load categories');\n    });\n\n    (function _callee() {\n      var _await$ImagePicker$re, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(Platform.OS !== 'web')) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(ImagePicker.requestCameraPermissionsAsync());\n\n            case 3:\n              _await$ImagePicker$re = _context.sent;\n              status = _await$ImagePicker$re.status;\n\n              if (status !== 'granted') {\n                alert('Sorry, we need camera roll permissions to make this work!');\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n\n    return function () {\n      setCategories([]);\n    };\n  }, []);\n\n  var pickImage = function pickImage() {\n    var result;\n    return _regeneratorRuntime.async(function pickImage$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              aspect: [4, 3],\n              quality: 1\n            }));\n\n          case 2:\n            result = _context2.sent;\n\n            if (!result.cancelled) {\n              setMainImage(result.uri);\n              setImage(result.uri);\n            }\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var addProduct = function addProduct() {\n    if (name == '' || brand == '' || price == '' || description == '' || category == '' || countInStock == '') {\n      setError('Please fill in the form correctly');\n    }\n\n    var formData = new FormData();\n    var newImageUri = 'file:///' + image.split('file:/').join('');\n    formData.append('image', {\n      uri: newImageUri,\n      type: mime.getType(newImageUri),\n      name: newImageUri.split('/').pop()\n    });\n    formData.append('name', name);\n    formData.append('brand', brand);\n    formData.append('price', price);\n    formData.append('description', description);\n    formData.append('category', category);\n    formData.append('countInStock', countInStock);\n    formData.append('richDescription', richDescription);\n    formData.append('rating', rating);\n    formData.append('numReviews', numReviews);\n    formData.append('isFeatured', isFeatured);\n    var config = {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n        Authorization: \"Bearer \" + token\n      }\n    };\n\n    if (item !== null) {\n      axios.put(baseURL + \"products/\" + item.id, formData, config).then(function (res) {\n        if (res.status == 200 || res.status == 201) {\n          Toast.show({\n            topOffset: 60,\n            type: 'success',\n            text1: 'Product successfuly updated',\n            text2: ''\n          });\n          setTimeout(function () {\n            props.navigation.navigate('Products');\n          }, 500);\n        }\n      }).catch(function (error) {\n        Toast.show({\n          topOffset: 60,\n          type: 'error',\n          text1: 'Something went wrong',\n          text2: 'Please try again'\n        });\n      });\n    } else {\n      axios.post(baseURL + \"products\", formData, config).then(function (res) {\n        if (res.status == 200 || res.status == 201) {\n          Toast.show({\n            topOffset: 60,\n            type: 'success',\n            text1: 'New Product added',\n            text2: ''\n          });\n          setTimeout(function () {\n            props.navigation.navigate('Products');\n          }, 500);\n        }\n      }).catch(function (error) {\n        Toast.show({\n          topOffset: 60,\n          type: 'error',\n          text1: 'Something went wrong',\n          text2: 'Please try again'\n        });\n      });\n    }\n  };\n\n  return React.createElement(FormContainer, {\n    title: \"Add Product\"\n  }, React.createElement(View, {\n    style: styles.imageContainer\n  }, React.createElement(Image, {\n    style: styles.image,\n    source: {\n      uri: mainImage\n    }\n  }), React.createElement(TouchableOpacity, {\n    onPress: pickImage,\n    style: styles.imagePicker\n  }, React.createElement(Icon, {\n    style: {\n      color: 'white'\n    },\n    name: \"camera\"\n  }))), React.createElement(View, {\n    style: styles.label\n  }, React.createElement(Text, {\n    style: {\n      textDecorationLine: 'underline'\n    }\n  }, \"Brand\")), React.createElement(Input, {\n    placeholder: \"Brand\",\n    name: \"brand\",\n    id: \"brand\",\n    value: brand,\n    onChangeText: function onChangeText(text) {\n      return setBrand(text);\n    }\n  }), React.createElement(View, {\n    style: styles.label\n  }, React.createElement(Text, {\n    style: {\n      textDecorationLine: 'underline'\n    }\n  }, \"Name\")), React.createElement(Input, {\n    placeholder: \"Name\",\n    name: \"name\",\n    id: \"name\",\n    value: name,\n    onChangeText: function onChangeText(text) {\n      return setName(text);\n    }\n  }), React.createElement(View, {\n    style: styles.label\n  }, React.createElement(Text, {\n    style: {\n      textDecorationLine: 'underline'\n    }\n  }, \"Price\")), React.createElement(Input, {\n    placeholder: \"Price\",\n    name: \"price\",\n    id: \"price\",\n    value: price,\n    keyboardType: 'numeric',\n    onChangeText: function onChangeText(text) {\n      return setPrice(text);\n    }\n  }), React.createElement(View, {\n    style: styles.label\n  }, React.createElement(Text, {\n    style: {\n      textDecorationLine: 'underline'\n    }\n  }, \"Count in Stock\")), React.createElement(Input, {\n    placeholder: \"Stock\",\n    name: \"stock\",\n    id: \"stock\",\n    value: countInStock,\n    keyboardType: 'numeric',\n    onChangeText: function onChangeText(text) {\n      return setCountInStock(text);\n    }\n  }), React.createElement(View, {\n    style: styles.label\n  }, React.createElement(Text, {\n    style: {\n      textDecorationLine: 'underline'\n    }\n  }, \"Description\")), React.createElement(Input, {\n    placeholder: \"Description\",\n    name: \"description\",\n    id: \"description\",\n    value: description,\n    onChangeText: function onChangeText(text) {\n      return setDescription(text);\n    }\n  }), React.createElement(Item, {\n    picker: true\n  }, React.createElement(Picker, {\n    mode: \"dropdown\",\n    iosIcon: React.createElement(Icon, {\n      color: '#007aff',\n      name: \"arrow-down\"\n    }),\n    style: {\n      width: undefined\n    },\n    placeholder: \"Select your Category\",\n    selectedValue: pickerValue,\n    placeholderStyle: {\n      color: '#007aff'\n    },\n    placeholderIconColor: \"#007aff\",\n    onValueChange: function onValueChange(e) {\n      return [setPickerValue(e), setCategory(e)];\n    }\n  }, categories.map(function (c) {\n    return React.createElement(Picker.Item, {\n      key: c.id,\n      label: c.name,\n      value: c.id\n    });\n  }))), err ? React.createElement(Error, {\n    message: err\n  }) : null, React.createElement(View, {\n    style: styles.buttonContainer\n  }, React.createElement(EasyButton, {\n    large: true,\n    primary: true,\n    onPress: function onPress() {\n      return addProduct();\n    }\n  }, React.createElement(Text, {\n    style: styles.buttonText\n  }, \"Confirm\"))));\n};\n\nvar styles = StyleSheet.create({\n  label: {\n    width: '80%',\n    marginTop: 10\n  },\n  buttonContainer: {\n    width: '80%',\n    marginBottom: 80,\n    marginTop: 20,\n    alignItems: 'center'\n  },\n  buttonText: {\n    color: 'white'\n  },\n  imageContainer: {\n    width: 200,\n    height: 200,\n    borderStyle: 'solid',\n    borderWidth: 8,\n    padding: 0,\n    justifyContent: 'center',\n    borderRadius: 100,\n    borderColor: '#E0E0E0',\n    elevation: 10\n  },\n  image: {\n    width: '100%',\n    height: '100%',\n    borderRadius: 100\n  },\n  imagePicker: {\n    position: 'absolute',\n    right: 5,\n    bottom: 5,\n    backgroundColor: 'grey',\n    padding: 8,\n    borderRadius: 100,\n    elevation: 20\n  }\n});\nexport default ProductForm;","map":{"version":3,"sources":["/Users/atultiwari/Desktop/mern-ecom-app/easy-shop/Screens/Admin/ProductForm.js"],"names":["React","useState","useEffect","Item","Picker","FormContainer","Input","EasyButton","Error","Icon","Toast","AsyncStorage","baseURL","axios","ImagePicker","mime","ProductForm","props","pickerValue","setPickerValue","brand","setBrand","name","setName","price","setPrice","description","setDescription","image","setImage","mainImage","setMainImage","category","setCategory","categories","setCategories","token","setToken","err","setError","countInStock","setCountInStock","rating","setRating","isFeatured","setIsFeature","richDescription","setRichDescription","numReviews","setNumReviews","item","setItem","route","params","toString","_id","getItem","then","res","catch","error","console","log","get","data","alert","Platform","OS","requestCameraPermissionsAsync","status","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","result","cancelled","uri","addProduct","formData","FormData","newImageUri","split","join","append","type","getType","pop","config","headers","Authorization","put","id","show","topOffset","text1","text2","setTimeout","navigation","navigate","post","styles","imageContainer","imagePicker","color","label","textDecorationLine","text","width","undefined","e","map","c","buttonContainer","buttonText","StyleSheet","create","marginTop","marginBottom","alignItems","height","borderStyle","borderWidth","padding","justifyContent","borderRadius","borderColor","elevation","position","right","bottom","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  Image,\n  StyleSheet,\n  TouchableOpacity,\n  Platform,\n} from 'react-native';\nimport { Item, Picker } from 'native-base';\nimport FormContainer from '../../Shared/Form/FormContainer';\nimport Input from '../../Shared/Form/Input';\nimport EasyButton from '../../Shared/StyledComponents/EasyButton';\nimport Error from '../../Shared/Error';\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport Toast from 'react-native-toast-message';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport baseURL from '../../assets/common/baseUrl';\nimport axios from 'axios';\nimport * as ImagePicker from 'expo-image-picker';\nimport mime from 'mime';\n\nconst ProductForm = (props) => {\n  const [pickerValue, setPickerValue] = useState();\n  const [brand, setBrand] = useState();\n  const [name, setName] = useState();\n  const [price, setPrice] = useState();\n  const [description, setDescription] = useState();\n  const [image, setImage] = useState();\n  const [mainImage, setMainImage] = useState();\n  const [category, setCategory] = useState();\n  const [categories, setCategories] = useState([]);\n  const [token, setToken] = useState();\n  const [err, setError] = useState();\n  const [countInStock, setCountInStock] = useState();\n  const [rating, setRating] = useState(0);\n  const [isFeatured, setIsFeature] = useState(false);\n  const [richDescription, setRichDescription] = useState();\n  const [numReviews, setNumReviews] = useState(0);\n  const [item, setItem] = useState(null);\n\n  useEffect(() => {\n    if (!props.route.params) {\n      setItem(null);\n    } else {\n      setItem(props.route.params.item);\n      setBrand(props.route.params.item.brand);\n      setName(props.route.params.item.name);\n      setPrice(props.route.params.item.price.toString());\n      setDescription(props.route.params.item.description);\n      setMainImage(props.route.params.item.image);\n      setImage(props.route.params.item.image);\n      setCategory(props.route.params.item.category._id);\n      setCountInStock(props.route.params.item.countInStock.toString());\n    }\n\n    AsyncStorage.getItem('jwt')\n      .then((res) => {\n        setToken(res);\n      })\n      .catch((error) => console.log(error));\n\n    // Categories\n    axios\n      .get(`${baseURL}categories`)\n      .then((res) => setCategories(res.data))\n      .catch((error) => alert('Error to load categories'));\n\n    // Image Picker\n    (async () => {\n      if (Platform.OS !== 'web') {\n        const { status } = await ImagePicker.requestCameraPermissionsAsync();\n        if (status !== 'granted') {\n          alert('Sorry, we need camera roll permissions to make this work!');\n        }\n      }\n    })();\n\n    return () => {\n      setCategories([]);\n    };\n  }, []);\n\n  const pickImage = async () => {\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\n      allowsEditing: true,\n      aspect: [4, 3],\n      quality: 1,\n    });\n\n    if (!result.cancelled) {\n      setMainImage(result.uri);\n      setImage(result.uri);\n    }\n  };\n\n  const addProduct = () => {\n    if (\n      name == '' ||\n      brand == '' ||\n      price == '' ||\n      description == '' ||\n      category == '' ||\n      countInStock == ''\n    ) {\n      setError('Please fill in the form correctly');\n    }\n\n    let formData = new FormData();\n\n    const newImageUri = 'file:///' + image.split('file:/').join('');\n\n    formData.append('image', {\n      uri: newImageUri,\n      type: mime.getType(newImageUri),\n      name: newImageUri.split('/').pop(),\n    });\n    formData.append('name', name);\n    formData.append('brand', brand);\n    formData.append('price', price);\n    formData.append('description', description);\n    formData.append('category', category);\n    formData.append('countInStock', countInStock);\n    formData.append('richDescription', richDescription);\n    formData.append('rating', rating);\n    formData.append('numReviews', numReviews);\n    formData.append('isFeatured', isFeatured);\n\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n        Authorization: `Bearer ${token}`,\n      },\n    };\n\n    if (item !== null) {\n      axios\n        .put(`${baseURL}products/${item.id}`, formData, config)\n        .then((res) => {\n          if (res.status == 200 || res.status == 201) {\n            Toast.show({\n              topOffset: 60,\n              type: 'success',\n              text1: 'Product successfuly updated',\n              text2: '',\n            });\n            setTimeout(() => {\n              props.navigation.navigate('Products');\n            }, 500);\n          }\n        })\n        .catch((error) => {\n          Toast.show({\n            topOffset: 60,\n            type: 'error',\n            text1: 'Something went wrong',\n            text2: 'Please try again',\n          });\n        });\n    } else {\n      axios\n        .post(`${baseURL}products`, formData, config)\n        .then((res) => {\n          if (res.status == 200 || res.status == 201) {\n            Toast.show({\n              topOffset: 60,\n              type: 'success',\n              text1: 'New Product added',\n              text2: '',\n            });\n            setTimeout(() => {\n              props.navigation.navigate('Products');\n            }, 500);\n          }\n        })\n        .catch((error) => {\n          Toast.show({\n            topOffset: 60,\n            type: 'error',\n            text1: 'Something went wrong',\n            text2: 'Please try again',\n          });\n        });\n    }\n  };\n\n  return (\n    <FormContainer title='Add Product'>\n      <View style={styles.imageContainer}>\n        <Image style={styles.image} source={{ uri: mainImage }} />\n        <TouchableOpacity onPress={pickImage} style={styles.imagePicker}>\n          <Icon style={{ color: 'white' }} name='camera' />\n        </TouchableOpacity>\n      </View>\n      <View style={styles.label}>\n        <Text style={{ textDecorationLine: 'underline' }}>Brand</Text>\n      </View>\n      <Input\n        placeholder='Brand'\n        name='brand'\n        id='brand'\n        value={brand}\n        onChangeText={(text) => setBrand(text)}\n      />\n      <View style={styles.label}>\n        <Text style={{ textDecorationLine: 'underline' }}>Name</Text>\n      </View>\n      <Input\n        placeholder='Name'\n        name='name'\n        id='name'\n        value={name}\n        onChangeText={(text) => setName(text)}\n      />\n      <View style={styles.label}>\n        <Text style={{ textDecorationLine: 'underline' }}>Price</Text>\n      </View>\n      <Input\n        placeholder='Price'\n        name='price'\n        id='price'\n        value={price}\n        keyboardType={'numeric'}\n        onChangeText={(text) => setPrice(text)}\n      />\n      <View style={styles.label}>\n        <Text style={{ textDecorationLine: 'underline' }}>Count in Stock</Text>\n      </View>\n      <Input\n        placeholder='Stock'\n        name='stock'\n        id='stock'\n        value={countInStock}\n        keyboardType={'numeric'}\n        onChangeText={(text) => setCountInStock(text)}\n      />\n      <View style={styles.label}>\n        <Text style={{ textDecorationLine: 'underline' }}>Description</Text>\n      </View>\n      <Input\n        placeholder='Description'\n        name='description'\n        id='description'\n        value={description}\n        onChangeText={(text) => setDescription(text)}\n      />\n      <Item picker>\n        <Picker\n          mode='dropdown'\n          iosIcon={<Icon color={'#007aff'} name='arrow-down' />}\n          style={{ width: undefined }}\n          placeholder='Select your Category'\n          selectedValue={pickerValue}\n          placeholderStyle={{ color: '#007aff' }}\n          placeholderIconColor='#007aff'\n          onValueChange={(e) => [setPickerValue(e), setCategory(e)]}\n        >\n          {categories.map((c) => {\n            return <Picker.Item key={c.id} label={c.name} value={c.id} />;\n          })}\n        </Picker>\n      </Item>\n      {err ? <Error message={err} /> : null}\n      <View style={styles.buttonContainer}>\n        <EasyButton large primary onPress={() => addProduct()}>\n          <Text style={styles.buttonText}>Confirm</Text>\n        </EasyButton>\n      </View>\n    </FormContainer>\n  );\n};\n\nconst styles = StyleSheet.create({\n  label: {\n    width: '80%',\n    marginTop: 10,\n  },\n  buttonContainer: {\n    width: '80%',\n    marginBottom: 80,\n    marginTop: 20,\n    alignItems: 'center',\n  },\n  buttonText: {\n    color: 'white',\n  },\n  imageContainer: {\n    width: 200,\n    height: 200,\n    borderStyle: 'solid',\n    borderWidth: 8,\n    padding: 0,\n    justifyContent: 'center',\n    borderRadius: 100,\n    borderColor: '#E0E0E0',\n    elevation: 10,\n  },\n  image: {\n    width: '100%',\n    height: '100%',\n    borderRadius: 100,\n  },\n  imagePicker: {\n    position: 'absolute',\n    right: 5,\n    bottom: 5,\n    backgroundColor: 'grey',\n    padding: 8,\n    borderRadius: 100,\n    elevation: 20,\n  },\n});\n\nexport default ProductForm;\n"]},"metadata":{},"sourceType":"module"}