{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport EasyButton from \"../../Shared/StyledComponents/EasyButton\";\nimport baseURL from \"../../assets/common/baseUrl\";\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { add } from 'react-native-reanimated';\n\nvar _Dimensions$get = Dimensions.get('window'),\n    width = _Dimensions$get.width;\n\nvar Item = function Item(props) {\n  return React.createElement(View, {\n    style: styles.item\n  }, React.createElement(Text, null, props.item.name), React.createElement(EasyButton, {\n    danger: true,\n    medium: true,\n    onPress: function onPress() {\n      return props.delete(props.item._id);\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: 'white',\n      fontWeight: 'bold'\n    }\n  }, \"Delete\")));\n};\n\nvar Categories = function Categories(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      categories = _useState2[0],\n      setCategories = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      categoryName = _useState4[0],\n      setCategoryName = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      token = _useState6[0],\n      setToken = _useState6[1];\n\n  useEffect(function () {\n    AsyncStorage.getItem('jwt').then(function (res) {\n      setToken(res);\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    axios.get(baseURL + \"categories\").then(function (res) {\n      return setCategories(res.data);\n    }).catch(function (error) {\n      return alert('Error to load categories');\n    });\n    return function () {\n      setCategories();\n      setToken();\n    };\n  }, []);\n\n  var addCategory = function addCategory() {\n    var category = {\n      name: categoryName\n    };\n    var config = {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    };\n    axios.post(baseURL + \"categories\", category, config).then(function (res) {\n      return setCategories([].concat(_toConsumableArray(categories), [res.data]));\n    }).catch(function (error) {\n      return alert('Error to load categories');\n    });\n    setCategoryName('');\n  };\n\n  var deleteCategory = function deleteCategory(id) {\n    var config = {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    };\n    axios.delete(baseURL + \"categories/\" + id, config).then(function (res) {\n      var newCategories = categories.filter(function (item) {\n        return item.id !== id;\n      });\n      setCategories(newCategories);\n    }).catch(function (error) {\n      return alert('Error to load categories');\n    });\n  };\n\n  return React.createElement(View, {\n    style: {\n      position: 'relative',\n      height: '100%'\n    }\n  }, React.createElement(View, {\n    style: {\n      marginBottom: 60\n    }\n  }, React.createElement(FlatList, {\n    data: categories,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item,\n          index = _ref.index;\n      return React.createElement(Item, {\n        item: item,\n        index: index,\n        delete: deleteCategory\n      });\n    },\n    keyExtractor: function keyExtractor(item) {\n      return item.id;\n    }\n  })), React.createElement(View, {\n    style: styles.bottomBar\n  }, React.createElement(View, null, React.createElement(Text, null, \"Add Category\")), React.createElement(View, {\n    style: {\n      width: width / 2.5\n    }\n  }, React.createElement(TextInput, {\n    value: categoryName,\n    style: styles.input,\n    onChangeText: function onChangeText(text) {\n      return setCategoryName(text);\n    }\n  })), React.createElement(View, null, React.createElement(EasyButton, {\n    medium: true,\n    primary: true,\n    onPress: function onPress() {\n      return addCategory();\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: 'white',\n      fontWeight: 'bold'\n    }\n  }, \"Submit\")))));\n};\n\nvar styles = StyleSheet.create({\n  bottomBar: {\n    backgroundColor: 'white',\n    width: width,\n    height: 60,\n    padding: 2,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    position: 'absolute',\n    bottom: 0,\n    left: 0\n  },\n  input: {\n    height: 40,\n    borderColor: 'gray',\n    borderWidth: 1\n  },\n  item: {\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 1,\n    elevation: 1,\n    padding: 5,\n    margin: 5,\n    backgroundColor: 'white',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    borderRadius: 5\n  }\n});\nexport default Categories;","map":{"version":3,"sources":["/Users/atultiwari/Desktop/mern-ecom-app/easy-shop/Screens/Admin/Categories.js"],"names":["React","useEffect","useState","EasyButton","baseURL","axios","AsyncStorage","add","Dimensions","get","width","Item","props","styles","item","name","delete","_id","color","fontWeight","Categories","categories","setCategories","categoryName","setCategoryName","token","setToken","getItem","then","res","catch","error","console","log","data","alert","addCategory","category","config","headers","Authorization","post","deleteCategory","id","newCategories","filter","position","height","marginBottom","index","bottomBar","input","text","StyleSheet","create","backgroundColor","padding","flexDirection","alignItems","justifyContent","bottom","left","borderColor","borderWidth","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","margin","borderRadius"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {\n  View,\n  Text,\n  FlatList,\n  Dimensions,\n  TextInput,\n  StyleSheet,\n} from 'react-native';\nimport EasyButton from '../../Shared/StyledComponents/EasyButton';\nimport baseURL from '../../assets/common/baseUrl';\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { add } from 'react-native-reanimated';\n\nvar { width } = Dimensions.get('window');\n\nconst Item = (props) => {\n  return (\n    <View style={styles.item}>\n      <Text>{props.item.name}</Text>\n      <EasyButton danger medium onPress={() => props.delete(props.item._id)}>\n        <Text style={{ color: 'white', fontWeight: 'bold' }}>Delete</Text>\n      </EasyButton>\n    </View>\n  );\n};\n\nconst Categories = (props) => {\n  const [categories, setCategories] = useState([]);\n  const [categoryName, setCategoryName] = useState();\n  const [token, setToken] = useState();\n\n  useEffect(() => {\n    AsyncStorage.getItem('jwt')\n      .then((res) => {\n        setToken(res);\n      })\n      .catch((error) => console.log(error));\n\n    axios\n      .get(`${baseURL}categories`)\n      .then((res) => setCategories(res.data))\n      .catch((error) => alert('Error to load categories'));\n\n    return () => {\n      setCategories();\n      setToken();\n    };\n  }, []);\n\n  const addCategory = () => {\n    const category = {\n      name: categoryName,\n    };\n\n    const config = {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    };\n\n    axios\n      .post(`${baseURL}categories`, category, config)\n      .then((res) => setCategories([...categories, res.data]))\n      .catch((error) => alert('Error to load categories'));\n\n    setCategoryName('');\n  };\n\n  const deleteCategory = (id) => {\n    const config = {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    };\n\n    axios\n      .delete(`${baseURL}categories/${id}`, config)\n      .then((res) => {\n        const newCategories = categories.filter((item) => item.id !== id);\n        setCategories(newCategories);\n      })\n      .catch((error) => alert('Error to load categories'));\n  };\n\n  return (\n    <View style={{ position: 'relative', height: '100%' }}>\n      <View style={{ marginBottom: 60 }}>\n        <FlatList\n          data={categories}\n          renderItem={({ item, index }) => (\n            <Item item={item} index={index} delete={deleteCategory} />\n          )}\n          keyExtractor={(item) => item.id}\n        />\n      </View>\n      <View style={styles.bottomBar}>\n        <View>\n          <Text>Add Category</Text>\n        </View>\n        <View style={{ width: width / 2.5 }}>\n          <TextInput\n            value={categoryName}\n            style={styles.input}\n            onChangeText={(text) => setCategoryName(text)}\n          />\n        </View>\n        <View>\n          <EasyButton medium primary onPress={() => addCategory()}>\n            <Text style={{ color: 'white', fontWeight: 'bold' }}>Submit</Text>\n          </EasyButton>\n        </View>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  bottomBar: {\n    backgroundColor: 'white',\n    width: width,\n    height: 60,\n    padding: 2,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n  },\n  input: {\n    height: 40,\n    borderColor: 'gray',\n    borderWidth: 1,\n  },\n  item: {\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 1,\n    elevation: 1,\n    padding: 5,\n    margin: 5,\n    backgroundColor: 'white',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    borderRadius: 5,\n  },\n});\n\nexport default Categories;\n"]},"metadata":{},"sourceType":"module"}